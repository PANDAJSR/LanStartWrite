<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>InkCanvas Enhanced Plugin - Menu Button Test</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      margin: 0;
      padding: 20px;
      background: #f5f5f5;
    }
    .test-container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      border-radius: 12px;
      padding: 24px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    h1 {
      margin-top: 0;
      color: #333;
    }
    .test-section {
      margin-bottom: 24px;
      padding: 16px;
      background: #f9f9f9;
      border-radius: 8px;
    }
    .test-section h2 {
      margin-top: 0;
      font-size: 18px;
      color: #555;
    }
    .button-preview {
      display: flex;
      gap: 12px;
      align-items: center;
      padding: 16px;
      background: white;
      border-radius: 8px;
      border: 1px solid #e0e0e0;
    }
    .tool-btn {
      width: 44px;
      height: 44px;
      border-radius: 10px;
      border: 1px solid #ccc;
      background: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      touch-action: manipulation;
      -webkit-user-select: none;
      user-select: none;
      transition: background 0.15s ease;
    }
    .tool-btn:hover {
      background: #f6f6f6;
    }
    .tool-btn:active {
      background: #f0f0f0;
    }
    .tool-btn.active {
      box-shadow: inset 0 -2px 0 rgba(0,0,0,0.06);
      background: #f6f6f6;
    }
    .tool-btn svg {
      width: 22px;
      height: 22px;
    }
    .status-indicator {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 500;
      background: #e0e0e0;
      color: #666;
    }
    .status-indicator.enabled {
      background: #4caf50;
      color: white;
    }
    .status-indicator.disabled {
      background: #f44336;
      color: white;
    }
    .log-container {
      background: #2d2d2d;
      color: #f0f0f0;
      padding: 12px;
      border-radius: 6px;
      font-family: 'Consolas', 'Monaco', monospace;
      font-size: 12px;
      max-height: 200px;
      overflow-y: auto;
      margin-top: 12px;
    }
    .log-entry {
      margin: 4px 0;
      padding: 4px 0;
      border-bottom: 1px solid #404040;
    }
    .log-entry:last-child {
      border-bottom: none;
    }
    .log-time {
      color: #888;
      margin-right: 8px;
    }
    .info {
      color: #4caf50;
    }
    .action {
      color: #2196f3;
    }
  </style>
</head>
<body>
  <div class="test-container">
    <h1>InkCanvas Enhanced Plugin - 菜单按钮测试</h1>
    
    <div class="test-section">
      <h2>按钮预览</h2>
      <div class="button-preview">
        <button id="inkcanvasEnhancedBtn" class="tool-btn" title="增强笔触">
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
            <path fill="currentColor" d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
          </svg>
        </button>
        <div>
          <strong>增强笔触</strong><br>
          <span id="statusIndicator" class="status-indicator enabled">已启用</span>
        </div>
      </div>
    </div>

    <div class="test-section">
      <h2>交互测试</h2>
      <p>点击上方按钮来测试交互功能：</p>
      <ul>
        <li>悬停时背景色变化</li>
        <li>点击时背景色加深</li>
        <li>切换增强功能状态</li>
      </ul>
    </div>

    <div class="test-section">
      <h2>响应式设计测试</h2>
      <p>调整浏览器窗口大小，观察按钮在不同屏幕尺寸下的显示效果：</p>
      <div class="button-preview" style="flex-wrap: wrap;">
        <button class="tool-btn" title="增强笔触">
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
            <path fill="currentColor" d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
          </svg>
        </button>
        <button class="tool-btn" title="设置">
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
            <path fill="currentColor" d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
          </svg>
        </button>
        <button class="tool-btn" title="关于">
          <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24">
            <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
          </svg>
        </button>
      </div>
    </div>

    <div class="test-section">
      <h2>操作日志</h2>
      <div id="logContainer" class="log-container">
        <div class="log-entry">
          <span class="log-time">[初始化]</span>
          <span class="info">测试页面已加载</span>
        </div>
      </div>
    </div>
  </div>

  <script>
    let enhancedEnabled = true;
    const btn = document.getElementById('inkcanvasEnhancedBtn');
    const statusIndicator = document.getElementById('statusIndicator');
    const logContainer = document.getElementById('logContainer');

    function addLog(message, type = 'info') {
      const now = new Date();
      const timeStr = now.toLocaleTimeString('zh-CN', { hour12: false });
      const logEntry = document.createElement('div');
      logEntry.className = 'log-entry';
      logEntry.innerHTML = `<span class="log-time">[${timeStr}]</span><span class="${type}">${message}</span>`;
      logContainer.appendChild(logEntry);
      logContainer.scrollTop = logContainer.scrollHeight;
    }

    function updateStatus() {
      if (enhancedEnabled) {
        statusIndicator.textContent = '已启用';
        statusIndicator.className = 'status-indicator enabled';
        btn.classList.add('active');
      } else {
        statusIndicator.textContent = '已禁用';
        statusIndicator.className = 'status-indicator disabled';
        btn.classList.remove('active');
      }
    }

    btn.addEventListener('click', () => {
      enhancedEnabled = !enhancedEnabled;
      updateStatus();
      addLog(`增强笔触功能已${enhancedEnabled ? '启用' : '禁用'}`, 'action');
    });

    btn.addEventListener('mouseenter', () => {
      addLog('鼠标悬停在按钮上', 'info');
    });

    btn.addEventListener('mouseleave', () => {
      addLog('鼠标离开按钮', 'info');
    });

    window.addEventListener('resize', () => {
      const width = window.innerWidth;
      addLog(`窗口大小调整: ${width}px`, 'info');
    });

    addLog('增强笔触按钮已初始化', 'info');
  </script>
</body>
</html>